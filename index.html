<!doctype html>
<html lang="fa">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>فرم ساده — ذخیره در Supabase</title>
  <style>
    body{font-family:system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial;display:flex;align-items:center;justify-content:center;height:100vh;background:#f7fafc}
    .card{background:#fff;padding:24px;border-radius:12px;box-shadow:0 6px 24px rgba(0,0,0,0.08);width:360px}
    label{display:block;margin-top:12px;font-size:14px}
    input,textarea{width:100%;padding:10px;margin-top:6px;border:1px solid #e2e8f0;border-radius:8px}
    button{margin-top:14px;padding:10px 14px;border-radius:8px;border:0;cursor:pointer}
    .ok{color:green;margin-top:10px}
    .err{color:#b00020;margin-top:10px}
  </style>
</head>
<body>
  <div class="card">
    <h2>فرم نمونه</h2>
    <form id="myForm">
      <label for="name">نام</label>
      <input id="name" name="name" required />

      <label for="message">پیام</label>
      <textarea id="message" name="message" required rows="4"></textarea>

      <button type="submit">ارسال</button>
    </form>

    <div id="feedback" aria-live="polite"></div>
  </div>

  <!-- Supabase JS SDK via CDN (نسخه 2.x) -->
  <!-- Supabase JS SDK via CDN -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
  const SUPABASE_URL = "https://xmxmtoncjektbdptjots.supabase.co";
  const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhteG10b25jamVrdGJkcHRqb3RzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM2NDU1NDYsImV4cCI6MjA3OTIyMTU0Nn0.3KhyGSCY8gR-fAHAQnno8OoYfhTpwP6ZqYq0Kg053ws";

  // درست: استفاده از یک نام متفاوت
  const client = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

  const form = document.getElementById("myForm");
  const feedback = document.getElementById("feedback");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const name = document.getElementById("name").value.trim();
    const message = document.getElementById("message").value.trim();

    feedback.textContent = "";

    try {
      const { data, error } = await client
        .from("submissions")
        .insert([{ name, message }]);

      if (error) throw error;

      feedback.className = "ok";
      feedback.textContent = "با موفقیت ثبت شد ✔️";
      form.reset();
    } catch (err) {
      console.error(err);
      feedback.className = "err";
      feedback.textContent = "خطا در ارسال اطلاعات ❌";
    }
  });
</script>

